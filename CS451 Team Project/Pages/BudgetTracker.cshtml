@page
@model CS451_Team_Project.Pages.BudgetTrackerModel
@{
    Layout = Layout;
}
<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="~/css/custom.css">
    <!--<link rel="stylesheet" href="~/css/dashboard-custom.css"> -->
    <link rel="stylesheet" href="~/css/budgetTracker.css">
</head>

<body>

<main class="main">
<section class="charts_container">
    <div class="container ">
        <div class="card-group">
            <div class="col-md-12 col-lg-5">
                <div class="budget_card card">
                    <div id="carouselFinacialTips" class="carousel slide">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <canvas id="myPieChart"></canvas>
                                <div class="card-body">
                                    <h5 class="card-title budget_title">Budget Chart</h5>
                                </div>
                            </div>
                            <div class="carousel-item item">
                                <canvas id="debtPieChart"></canvas>
                                <div class="card-body">
                                    <h5 class="card-title budget_title">Debt Chart</h5>
                                </div>
                            </div>
                            <!-- formatting for this is weird 
                             <div class="carousel-item item">
                                <canvas id="myLinesChart"></canvas>
                                <div class="card-body">
                                    <h5 class="card-title">Investment Tracker</h5>
                                </div>
                            </div>-->
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselFinacialTips" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselFinacialTips" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                </div>
            </div>

            <!--
                <div class="container">
                    <div class="card-group">
                        <div class="col-md-5 col-lg-4">
                            <div class="col me-3">
                                <div class="card">
                                    <canvas id="myPieChart"></canvas>
                                    <div class="card-body">
                                        <h5 class="card-title">Budget Chart</h5>
                                    </div>
                                </div>
                            </div>
                            <div class="col me-3">
                                <div class="card">
                                    <canvas id="debtPieChart"></canvas>
                                    <div class="card-body">
                                        <h5 class="card-title">Debt Chart</h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-7 col-lg-8">
                            <div class="card">
                                <canvas id="myLineChart"></canvas>
                                <div class="card-body">
                                    <h5 class="card-title">Investment Tracker</h5>
                                </div>
                            </div>
                        </div>
                        -->

                    <div class="transaction_card card my-4">
                        <div class="card-body">
                            <h5 class="card-title">Transactions</h5>
                            <div class="mb-3">
                                <input type="text" class="form-control" id="transactionSearch" placeholder="Search transactions...">
                            </div>

                            <!-- Transaction form -->
                            <form method="post" id="transactionForm">
                                <div class="row">
                                    <!-- Date input -->
                                    <div class="col-md-3 mb-3">
                                        <label for="transactionDate" class="form-label">Date</label>
                                        <input type="date" class="form-control" id="transactionDate" name="TransactionInput.Date" required>
                                    </div>
                                    <!-- Description input -->
                                    <div class="col-md-3 mb-3">
                                        <label for="transactionDescription" class="form-label">Description</label>
                                        <input type="text" class="form-control" id="transactionDescription" name="TransactionInput.Description" required>
                                    </div>
                                    <!-- Category input -->
                                    <div class="col-md-3 mb-3">
                                        <label for="transactionCategory" class="form-label">Category</label>
                                        <input type="text" class="form-control" id="transactionCategory" name="TransactionInput.Category" required>
                                    </div>
                                    <!-- Amount input -->
                                    <div class="col-md-3 mb-3">
                                        <label for="transactionAmount" class="form-label">Amount</label>
                                        <input type="number" class="form-control" id="transactionAmount" name="TransactionInput.Amount" required>
                                    </div>
                                </div>
                                <!-- Submit button -->
                                <div class="row">
                                    <div class="col-md-12 mb-3">
                                        <button type="submit" class="btn btn-primary w-100">Add Transaction</button>
                                    </div>
                                </div>
                            </form>



                            <div class="table-responsive-sm" style="max-height:500px; overflow-x:hidden;">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Description</th>
                                            <th>Category</th>
                                            <th>Amount</th>
                                        </tr>
                                    </thead>
                                    <!-- For Database Connection -->
                                    <tbody>
                                        @foreach (var transaction in Model.Transactions)
                                        {
                                            <tr id="'@transaction.TransactionID'">
                                                <td>@transaction.Date.ToString("MM-dd-yyyy")</td>
                                                <td>@transaction.Description</td>
                                                <td>@transaction.Category</td>
                                                <td>@transaction.Amount.ToString("C")</td>
                                                <td><button type="button" class="btn btn-danger" onclick="removeTransaction('@transaction.TransactionID')">X</button></td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

        </div>
    </div>
</section>
</main>


    <script src="~/js/toggle-colors.js"></script>
    <script src="~/js/chart-info.js"></script>
    <script src="~/js/header.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#transactionSearch").on("keyup", function () {
                var value = $(this).val().toLowerCase();
                $("table tbody tr").filter(function () {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
            });
        });

    </script>
</body>

</html>
